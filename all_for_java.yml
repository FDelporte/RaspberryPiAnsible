- hosts: all
  tasks:
  - name: Update APT to be sure we are using latest repositories
    become: true
    apt:
      update_cache:

  - name: Upgrade system
    become: true
    apt:
      upgrade: dist
    notify: reboot server

  - name: Install some packages
    become: true
    apt:
      name: ['wget', 'vim', 'git', 'build-essential']

  - name: Install Maven
    become: true
    apt:
      name: maven
      state: present

  - name: Install OpenJDK Java 11
    become: true
    apt:
      name: openjdk-11-jre
      state: present

  - name: Download and extract OpenJFX 17
    become: true
    tags: javafxdownload
    unarchive:
      src: "https://gluonhq.com/download/javafx-17-ea-sdk-linux-arm32/"
      dest: "/opt/"
      mode: 0755
      remote_src: true

  - name: Rename the unpacked JavaFX 17 directory to consistently use the same location across projects
    become: true
    command: mv /opt/javafx-sdk-17/ /opt/arm32fb-sdk/

  - name: Install Visual Studio Code
    become: true
    apt:
      name: code
      state: present

  handlers:
    - name: reboot server
      become: true
      reboot:
